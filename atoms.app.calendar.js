(function(){"use strict";var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};__.Extension.Calendar={},__.Extension.Calendar.Day=function(_super){function Day(){return Day.__super__.constructor.apply(this,arguments)}return __extends(Day,_super),Day.template='<span class="{{style}} {{#disabled}}disabled{{/disabled}} {{#today}}today{{/today}} {{#active}}active{{/active}} {{#event}}event{{/event}}">{{day}}</span>',Day.base="Day",Day.events=["touch"],Day["default"]={events:["touch"]},Day}(Atoms.Class.Atom),Atoms.Molecule.Calendar=function(_super){function Calendar(attributes){Calendar.__super__.constructor.call(this,attributes),this.today=new Date,this.date(new Date(attributes.date||this.today))}return __extends(Calendar,_super),Calendar.available=["Atom.Day","Atom.Heading"],Calendar.events=["select"],Calendar["default"]={months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],children:[{"Atom.Heading":{id:"literal",value:"Year",size:"h4"}}]},Calendar.prototype.date=function(value){var attributes,child,date,day,first_day_of_month,index,last_day_of_month,month,previousDay,previous_days,year,_i,_j,_k,_l,_len,_len1,_m,_ref,_ref1,_ref2,_results;for(this.value=null!=value?value:new Date,_ref=this.children,_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],"Day"===child.constructor.name&&child.destroy();for(day=this.value.getDate(),month=this.value.getMonth(),year=this.value.getFullYear(),this.literal.el.html(""+this.attributes.months[month]+" - "+year),_ref1=this.attributes.days,_j=0,_len1=_ref1.length;_len1>_j;_j++)day=_ref1[_j],this.appendChild("App.Extension.Calendar.Day",{day:day,events:void 0});for(first_day_of_month=new Date(year,month).getDay()-1,previous_days=this._daysInMonth(month-1,year)-(first_day_of_month-1),previousDay=_k=0;first_day_of_month>=0?first_day_of_month>_k:_k>first_day_of_month;previousDay=first_day_of_month>=0?++_k:--_k)this.appendChild("App.Extension.Calendar.Day",{day:previous_days,disabled:!0}),previous_days++;for(day=_l=1,_ref2=this._daysInMonth(month,year);_ref2>=1?_ref2>=_l:_l>=_ref2;day=_ref2>=1?++_l:--_l)date=new Date(year,month,day),attributes={day:day,date:date,today:this.today.toString().substring(4,15)===date.toString().substring(4,15),active:this.value.toString().substring(4,15)===date.toString().substring(4,15),event:day>11&&13>day||day>19&&22>day},this.appendChild("App.Extension.Calendar.Day",attributes);for(last_day_of_month=new Date(year,month,this._daysInMonth(month,year)).getDay(),day=1,_results=[],index=_m=6;last_day_of_month>=6?last_day_of_month>=_m:_m>=last_day_of_month;index=last_day_of_month>=6?++_m:--_m)this.appendChild("App.Extension.Calendar.Day",{day:day,disabled:!0}),_results.push(day++);return _results},Calendar.prototype.onDayTouch=function(event,atom){return atom.el.addClass("active").siblings("[data-atom-day]").removeClass("active"),this.bubble("select",atom.attributes.date),!1},Calendar.prototype._daysInMonth=function(month,year){return null==year&&(year=2014),0>month&&(month=12,year--),32-new Date(year,month,32).getDate()},Calendar}(Atoms.Molecule.Div)}).call(this);